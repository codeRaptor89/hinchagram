{% include 'sitio/cabecera.html' %}

<style>
  .Titulo_agenda {
    text-align: center;
    margin-top: 20px;
  }


  .card-clickable {
    border: 2px solid #ffffff;
    border-radius: 15px;
    background-color: #1b5e75;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    aspect-ratio: 4 / 3; /* ✅ Proporción fija de la tarjeta */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: transform 0.2s ease-in-out;
    padding: 10px;
  }

  .card-clickable:hover {
    transform: scale(1.05);
  }

.user-image {
  max-width: 100%;
  max-height: 70%;
  object-fit: contain;
  margin-bottom: 10px;
  background-color: white; /* Fondo blanco */
}

  .user-profession {
    font-weight: 600;
    font-size: 14px;
    text-align: center;
    color: #ffffff;
    margin: 0;
  }

  .row-cols-1 .col,
  .row-cols-sm-2 .col,
  .row-cols-md-3 .col,
  .row-cols-lg-4 .col,
  .row-cols-xl-5 .col {
    display: flex;
  }

  .card {
    width: 100%;
  }



</style>

<header>
  <!-- Navbar -->
  <nav class="navbar navbar-light bg-light px-3">
    <a class="navbar-brand d-flex align-items-center me-auto" href="/">
      <img src="/templates/img/logo.png" alt="Logo" width="60" height="60" class="me-2">
    </a>

    <div class="d-flex flex-wrap gap-2 ms-auto">
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Argentina.png" alt="Argentina" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Espana.png" alt="España" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Ecuador.png" alt="Ecuador" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Peru.png" alt="Perú" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Uruguay.png" alt="Uruguay" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Colombia.png" alt="Colombia" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Mexico.png" alt="México" width="30" height="24"></a>
      <a class="navbar-brand" href="#"><img src="/templates/banderas/Chile.png" alt="Chile" width="30" height="24"></a>
    </div>
  </nav>
</header>

<main class="container-fluid">

  {% if fecha_actual %}
  <h5 class="Titulo_agenda">
    Eventos del {{fecha_actual.day}} de {{ fecha_actual.strftime('%B').capitalize() }} {{fecha_actual.year}}
  </h5>
  {% endif %}

  <!-- Acordeón de eventos -->
  <div class="card my-4">
    <div class="card-body">
      <div class="accordion" id="accordionExample">

        {% for partido in partidos %}
        {% set index = loop.index %}
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading{{ index }}">
            <button class="accordion-button" style="background-color: rgba(165, 227, 255, 0.5);" type="button"
              data-bs-toggle="collapse" data-bs-target="#collapse{{ index }}" aria-expanded="true"
              aria-controls="collapse{{ index }}">
              {{ partido.evento }}
            </button>
          </h2>

          <div id="collapse{{ index }}" class="accordion-collapse collapse"
            aria-labelledby="heading{{ index }}" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <ul class="d-flex flex-wrap list-unstyled gap-2">
                {% for canal in partido.canales %}
                <li>
                  <form action="{{ url_for('verPartido') }}" method="post" class="d-inline">
                    <input type="hidden" name="canal_url" value="{{ canal.url }}">
                    <input type="hidden" name="canal" value="{{ canal.nombre_canal }}">
                    <input type="hidden" name="nombre_evento" value="{{ partido.evento }}">
                    <input type="hidden" name="evento_id" value="{{ partido.id }}">
                    <button type="submit" class="btn btn-outline-primary btn-sm">{{ canal.nombre_canal }}</button>
                  </form>
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
        {% endfor %}

      </div>
    </div>
  </div>

  <!-- Tabla de canales -->
  <div class="container mt-5">
    <h2 class="text-center mb-4">Tabla de Tarjetas</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4">
      {% for canales in canal %}
      <form action="{{ url_for('verCanal') }}" method="post" class="d-inline">
        <input type="hidden" name="canal_url" value="{{ canales.url }}">
        <input type="hidden" name="canal" value="{{ canales.nombre }}">
        <input type="hidden" name="imagen" value="{{ canales.imagen }}">

        <div class="col">
          <div class="card card-clickable h-100 text-center p-2">
            <img src="{{ canales.imagen }}" class="user-image img-fluid" alt="{{ canales.nombre }}">
            <p class="user-profession">{{ canales.nombre }}</p>
          </div>
        </div>
      </form>
      {% endfor %}
    </div>
  </div>

  <!-- JS para clic en las tarjetas -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const clickableCards = document.querySelectorAll('.card-clickable');
      clickableCards.forEach(function (card) {
        card.style.cursor = 'pointer';
        card.addEventListener('click', function () {
          const form = card.closest('form');
          if (form) form.submit();
        });
      });
    });
  </script>

</main>

{% include 'sitio/pie.html' %}
